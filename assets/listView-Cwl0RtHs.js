import{x as ae,y as Y,z as A,A as ie,m as i,B as oe,C as me,h as l,D as ne,i as X,M as Te,E as Re,G as ge,H as Ne,I as $e,J as Ee,K as Ae,L as Le,N as Se,c as T,r as L,O as De,P as Ue,w as Me,Q as Oe,R as qe,S as We,T as Ke,F as R,U as te,W as ze,X as He,Y as Xe,Z as ce,$ as fe,a0 as Ye,a1 as Ze,s as je,a2 as ye,a3 as Ge,a4 as Je,a5 as Qe,a6 as et,n as le,a7 as tt,a8 as he,k as lt,l as B,v as nt,f as p,a9 as xe,e as E,p as be,u as ve,aa as at,ab as it,q as Ce,V as z}from"./index-C6fevlkM.js";import{u as ot}from"./list-BXEiF0PO.js";import{V as st,a as H,b as Ve}from"./VDivider-BJvxjh29.js";import{V as ut,m as rt,u as we,a as dt,b as ke,f as ct,c as ft,d as Ie}from"./forwardRefs-BC6leH6r.js";class Q{constructor(n){const s=document.body.currentCSSZoom??1,a=n instanceof Element,t=a?1+(1-s)/s:1,{x:d,y:c,width:h,height:m}=a?n.getBoundingClientRect():n;this.x=d*t,this.y=c*t,this.width=h*t,this.height=m*t}get top(){return this.y}get bottom(){return this.y+this.height}get left(){return this.x}get right(){return this.x+this.width}}function vt(e){const n=new Q(e),s=getComputedStyle(e),a=s.transform;if(a){let t,d,c,h,m;if(a.startsWith("matrix3d("))t=a.slice(9,-1).split(/, /),d=Number(t[0]),c=Number(t[5]),h=Number(t[12]),m=Number(t[13]);else if(a.startsWith("matrix("))t=a.slice(7,-1).split(/, /),d=Number(t[0]),c=Number(t[3]),h=Number(t[4]),m=Number(t[5]);else return new Q(n);const g=s.transformOrigin,k=n.x-h-(1-d)*parseFloat(g),_=n.y-m-(1-c)*parseFloat(g.slice(g.indexOf(" ")+1)),N=d?n.width/d:e.offsetWidth+1,r=c?n.height/c:e.offsetHeight+1;return new Q({x:k,y:_,width:N,height:r})}else return new Q(n)}function mt(e,n,s){if(typeof e.animate>"u")return{finished:Promise.resolve()};let a;try{a=e.animate(n,s)}catch{return{finished:Promise.resolve()}}return typeof a.finished>"u"&&(a.finished=new Promise(t=>{a.onfinish=()=>{t(a)}})),a}const gt=Y({active:Boolean,disabled:Boolean,max:[Number,String],value:{type:[Number,String],default:0},...ge(),...Re({transition:{component:Ne}})},"VCounter"),yt=ae()({name:"VCounter",functional:!0,props:gt(),setup(e,n){let{slots:s}=n;const a=A(()=>e.max?`${e.value} / ${e.max}`:String(e.value));return ie(()=>i(Te,{transition:e.transition},{default:()=>[oe(l("div",{class:X(["v-counter",{"text-error":e.max&&!e.disabled&&parseFloat(e.value)>parseFloat(e.max)},e.class]),style:ne(e.style)},[s.default?s.default({counter:a.value,max:e.max,value:e.value}):a.value]),[[me,e.active]])]})),{}}}),ht=Y({floating:Boolean,...ge()},"VFieldLabel"),ee=ae()({name:"VFieldLabel",props:ht(),setup(e,n){let{slots:s}=n;return ie(()=>i(ut,{class:X(["v-field-label",{"v-field-label--floating":e.floating},e.class]),style:ne(e.style)},s)),{}}}),xt=["underlined","outlined","filled","solo","solo-inverted","solo-filled","plain"],Pe=Y({appendInnerIcon:fe,bgColor:String,clearable:Boolean,clearIcon:{type:fe,default:"$clear"},active:Boolean,centerAffix:{type:Boolean,default:void 0},color:String,baseColor:String,dirty:Boolean,disabled:{type:Boolean,default:null},glow:Boolean,error:Boolean,flat:Boolean,iconColor:[Boolean,String],label:String,persistentClear:Boolean,prependInnerIcon:fe,reverse:Boolean,singleLine:Boolean,variant:{type:String,default:"filled",validator:e=>xt.includes(e)},"onClick:clear":ce(),"onClick:appendInner":ce(),"onClick:prependInner":ce(),...ge(),...Xe(),...He(),...ze()},"VField"),_e=ae()({name:"VField",inheritAttrs:!1,props:{id:String,details:Boolean,...rt(),...Pe()},emits:{"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,n){let{attrs:s,emit:a,slots:t}=n;const{themeClasses:d}=$e(e),{loaderClasses:c}=Ee(e),{focusClasses:h,isFocused:m,focus:g,blur:k}=we(e),{InputIcon:_}=dt(e),{roundedClasses:N}=Ae(e),{rtlClasses:r}=Le(),u=A(()=>e.dirty||e.active),o=A(()=>!!(e.label||t.label)),y=A(()=>!e.singleLine&&o.value),I=Se(),b=T(()=>e.id||`input-${I}`),Z=A(()=>e.details?`${b.value}-messages`:void 0),j=L(),D=L(),G=L(),f=T(()=>["plain","underlined"].includes(e.variant)),v=T(()=>e.error||e.disabled?void 0:u.value&&m.value?e.color:e.baseColor),F=T(()=>{if(!(!e.iconColor||e.glow&&!m.value))return e.iconColor===!0?v.value:e.iconColor}),{backgroundColorClasses:U,backgroundColorStyles:O}=De(()=>e.bgColor),{textColorClasses:$,textColorStyles:J}=Ue(v);Me(u,S=>{if(y.value&&!Oe()){const V=j.value.$el,w=D.value.$el;requestAnimationFrame(()=>{const P=vt(V),x=w.getBoundingClientRect(),M=x.x-P.x,q=x.y-P.y-(P.height/2-x.height/2),W=x.width/.75,ue=Math.abs(W-P.width)>1?{maxWidth:qe(W)}:void 0,re=getComputedStyle(V),K=getComputedStyle(w),de=parseFloat(re.transitionDuration)*1e3||150,Be=parseFloat(K.getPropertyValue("--v-field-label-scale")),pe=K.getPropertyValue("color");V.style.visibility="visible",w.style.visibility="hidden",mt(V,{transform:`translate(${M}px, ${q}px) scale(${Be})`,color:pe,...ue},{duration:de,easing:Ye,direction:S?"normal":"reverse"}).finished.then(()=>{V.style.removeProperty("visibility"),w.style.removeProperty("visibility")})})}},{flush:"post"});const C=T(()=>({isActive:u,isFocused:m,controlRef:G,blur:k,focus:g}));function se(S){S.target!==document.activeElement&&S.preventDefault()}return ie(()=>{const S=e.variant==="outlined",V=!!(t["prepend-inner"]||e.prependInnerIcon),w=!!(e.clearable||t.clear)&&!e.disabled,P=!!(t["append-inner"]||e.appendInnerIcon||w),x=()=>t.label?t.label({...C.value,label:e.label,props:{for:b.value}}):e.label;return l("div",te({class:["v-field",{"v-field--active":u.value,"v-field--appended":P,"v-field--center-affix":e.centerAffix??!f.value,"v-field--disabled":e.disabled,"v-field--dirty":e.dirty,"v-field--error":e.error,"v-field--glow":e.glow,"v-field--flat":e.flat,"v-field--has-background":!!e.bgColor,"v-field--persistent-clear":e.persistentClear,"v-field--prepended":V,"v-field--reverse":e.reverse,"v-field--single-line":e.singleLine,"v-field--no-label":!x(),[`v-field--variant-${e.variant}`]:!0},d.value,U.value,h.value,c.value,N.value,r.value,e.class],style:[O.value,e.style],onClick:se},s),[l("div",{class:"v-field__overlay"},null),i(We,{name:"v-field",active:!!e.loading,color:e.error?"error":typeof e.loading=="string"?e.loading:e.color},{default:t.loader}),V&&l("div",{key:"prepend",class:"v-field__prepend-inner"},[e.prependInnerIcon&&i(_,{key:"prepend-icon",name:"prependInner",color:F.value},null),t["prepend-inner"]?.(C.value)]),l("div",{class:"v-field__field","data-no-activator":""},[["filled","solo","solo-inverted","solo-filled"].includes(e.variant)&&y.value&&i(ee,{key:"floating-label",ref:D,class:X([$.value]),floating:!0,for:b.value,"aria-hidden":!u.value,style:ne(J.value)},{default:()=>[x()]}),o.value&&i(ee,{key:"label",ref:j,for:b.value},{default:()=>[x()]}),t.default?.({...C.value,props:{id:b.value,class:"v-field__input","aria-describedby":Z.value},focus:g,blur:k})??l("div",{id:b.value,class:"v-field__input","aria-describedby":Z.value},null)]),w&&i(Ke,{key:"clear"},{default:()=>[oe(l("div",{class:"v-field__clearable",onMousedown:M=>{M.preventDefault(),M.stopPropagation()}},[i(Ze,{defaults:{VIcon:{icon:e.clearIcon}}},{default:()=>[t.clear?t.clear({...C.value,props:{onFocus:g,onBlur:k,onClick:e["onClick:clear"],tabindex:-1}}):i(_,{name:"clear",onFocus:g,onBlur:k,tabindex:-1},null)]})]),[[me,e.dirty]])]}),P&&l("div",{key:"append",class:"v-field__append-inner"},[t["append-inner"]?.(C.value),e.appendInnerIcon&&i(_,{key:"append-icon",name:"appendInner",color:F.value},null)]),l("div",{class:X(["v-field__outline",$.value]),style:ne(J.value)},[S&&l(R,null,[l("div",{class:"v-field__outline__start"},null),y.value&&l("div",{class:"v-field__outline__notch"},[i(ee,{ref:D,floating:!0,for:b.value,"aria-hidden":!u.value},{default:()=>[x()]})]),l("div",{class:"v-field__outline__end"},null)]),f.value&&y.value&&i(ee,{ref:D,floating:!0,for:b.value,"aria-hidden":!u.value},{default:()=>[x()]})])])}),{controlRef:G,fieldIconColor:F}}}),bt=Y({autocomplete:String},"autocomplete");function Ct(e){const n=Se(),s=je(0),a=A(()=>e.autocomplete==="suppress"),t=A(()=>{if(e.name)return a.value?`${e.name}-${n}-${s.value}`:e.name}),d=A(()=>a.value?"off":e.autocomplete);return{isSuppressing:a,fieldAutocomplete:d,fieldName:t,update:()=>s.value=new Date().getTime()}}function Vt(e){function n(s,a){if(!e.autofocus||!s)return;const t=a[0].target;(t.matches("input,textarea")?t:t.querySelector("input,textarea"))?.focus()}return{onIntersect:n}}const kt=["color","file","time","date","datetime-local","week","month"],It=Y({autofocus:Boolean,counter:[Boolean,Number,String],counterValue:[Number,Function],prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,suffix:String,role:String,type:{type:String,default:"text"},modelModifiers:Object,...bt(),...ft(),...Pe()},"VTextField"),Fe=ae()({name:"VTextField",directives:{vIntersect:ye},inheritAttrs:!1,props:It(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,n){let{attrs:s,emit:a,slots:t}=n;const d=Ge(e,"modelValue"),{isFocused:c,focus:h,blur:m}=we(e),{onIntersect:g}=Vt(e),k=T(()=>typeof e.counterValue=="function"?e.counterValue(d.value):typeof e.counterValue=="number"?e.counterValue:(d.value??"").toString().length),_=T(()=>{if(s.maxlength)return s.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter}),N=T(()=>["plain","underlined"].includes(e.variant)),r=L(),u=L(),o=L(),y=Ct(e),I=T(()=>kt.includes(e.type)||e.persistentPlaceholder||c.value||e.active);function b(){y.isSuppressing.value&&y.update(),c.value||h(),le(()=>{o.value!==document.activeElement&&o.value?.focus()})}function Z(f){a("mousedown:control",f),f.target!==o.value&&(b(),f.preventDefault())}function j(f){a("click:control",f)}function D(f,v){f.stopPropagation(),b(),le(()=>{v(),tt(e["onClick:clear"],f)})}function G(f){const v=f.target;if(!(e.modelModifiers?.trim&&["text","search","password","tel","url"].includes(e.type))){d.value=v.value;return}const F=v.value,U=v.selectionStart,O=v.selectionEnd;d.value=F,le(()=>{let $=0;F.trimStart().length===v.value.length&&($=F.length-v.value.length),U!=null&&(v.selectionStart=U-$),O!=null&&(v.selectionEnd=O-$)})}return ie(()=>{const f=!!(t.counter||e.counter!==!1&&e.counter!=null),v=!!(f||t.details),[F,U]=Je(s),{modelValue:O,...$}=ke.filterProps(e),J=_e.filterProps(e);return i(ke,te({ref:r,modelValue:d.value,"onUpdate:modelValue":C=>d.value=C,class:["v-text-field",{"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-input--plain-underlined":N.value},e.class],style:e.style},F,$,{centerAffix:!N.value,focused:c.value}),{...t,default:C=>{let{id:se,isDisabled:S,isDirty:V,isReadonly:w,isValid:P,hasDetails:x,reset:M}=C;return i(_e,te({ref:u,onMousedown:Z,onClick:j,"onClick:clear":q=>D(q,M),role:e.role},Qe(J,["onClick:clear"]),{id:se.value,active:I.value||V.value,dirty:V.value||e.dirty,disabled:S.value,focused:c.value,details:x.value,error:P.value===!1}),{...t,default:q=>{let{props:{class:W,...ue},controlRef:re}=q;const K=l("input",te({ref:de=>o.value=re.value=de,value:d.value,onInput:G,autofocus:e.autofocus,readonly:w.value,disabled:S.value,name:y.fieldName.value,autocomplete:y.fieldAutocomplete.value,placeholder:e.placeholder,size:1,role:e.role,type:e.type,onFocus:h,onBlur:m},ue,U),null);return l(R,null,[e.prefix&&l("span",{class:"v-text-field__prefix"},[l("span",{class:"v-text-field__prefix__text"},[e.prefix])]),oe(t.default?l("div",{class:X(W),"data-no-activator":""},[t.default(),K]):et(K,{class:W}),[[ye,g,null,{once:!0}]]),e.suffix&&l("span",{class:"v-text-field__suffix"},[l("span",{class:"v-text-field__suffix__text"},[e.suffix])])])}})},details:v?C=>l(R,null,[t.details?.(C),f&&l(R,null,[l("span",null,null),i(yt,{active:e.persistentCounter||c.value,value:k.value,max:_.value,disabled:e.disabled},t.counter)])]):void 0})}),ct({},r,u,o)}}),_t={key:0},Bt={__name:"listView",setup(e){const n=ot(),s=L(""),a=he("inputTextField"),t=he("editTextField"),d={required:r=>!!r||"必填",length:r=>r.length>=3||"必須三個字以上"},c=()=>{a.value.isValid&&(n.items.push({id:n.id++,text:s.value,edit:!1,input:s.value}),a.value.reset())},h=async r=>{!r&&!s.value&&(await le(),a.value.resetValidation())},m=r=>{r.edit=!0},g=(r,u)=>{t.value[u].isValid&&(r.text=r.input,r.edit=!1)},k=r=>{r.input=r.text,r.edit=!1},_=r=>{const u=n.items.findIndex(o=>o.id===r);n.items.splice(u,1)},N=r=>{const u=n.finishedItems.findIndex(o=>o.id===r);n.finishedItems.splice(u,1)};return(r,u)=>(p(),lt(nt,null,{default:B(()=>[i(st,null,{default:B(()=>[i(H,{cols:"12"},{default:B(()=>[...u[1]||(u[1]=[l("h1",{class:"text-center"},"未完成",-1)])]),_:1}),i(Ve),i(H,{cols:"12"},{default:B(()=>[i(Fe,{ref_key:"inputTextField",ref:a,modelValue:s.value,"onUpdate:modelValue":u[0]||(u[0]=o=>s.value=o),"append-icon":"mdi-plus",clearable:"",hint:"請輸入三個字以上",label:"新增事項",rules:[d.required,d.length],"onClick:append":c,onKeydown:xe(c,["enter"]),"onUpdate:focused":h},null,8,["modelValue","rules"])]),_:1}),i(H,{cols:"12"},{default:B(()=>[i(Ie,null,{default:B(()=>[u[2]||(u[2]=l("thead",null,[l("tr",null,[l("th",null,"事項"),l("th",null,"操作")])],-1)),l("tbody",null,[(p(!0),E(R,null,be(ve(n).items,(o,y)=>(p(),E("tr",{key:o.id},[l("td",null,[oe(i(Fe,{ref_for:!0,ref_key:"editTextField",ref:t,modelValue:o.input,"onUpdate:modelValue":I=>o.input=I,autofocus:"",rules:[d.required,d.length],onKeydown:xe(I=>g(o,y),["enter"])},null,8,["modelValue","onUpdate:modelValue","rules","onKeydown"]),[[me,o.edit]]),o.edit?at("",!0):(p(),E(R,{key:0},[it(Ce(o.text),1)],64))]),l("td",null,[o.edit?(p(),E(R,{key:0},[i(z,{icon:"mdi-undo",onClick:I=>k(o)},null,8,["onClick"]),i(z,{icon:"mdi-check",onClick:I=>g(o,y)},null,8,["onClick"])],64)):(p(),E(R,{key:1},[i(z,{icon:"mdi-pencil",onClick:I=>m(o)},null,8,["onClick"]),i(z,{icon:"mdi-delete",onClick:I=>_(o.id)},null,8,["onClick"])],64))])]))),128))])]),_:1})]),_:1}),i(H,{cols:"12"},{default:B(()=>[...u[3]||(u[3]=[l("h1",{class:"text-center"},"已完成",-1)])]),_:1}),i(Ve),i(H,{cols:"12"},{default:B(()=>[i(Ie,null,{default:B(()=>[u[5]||(u[5]=l("thead",null,[l("tr",null,[l("th",null,"事項"),l("th",null,"操作")])],-1)),l("tbody",null,[ve(n).finishedItems.length===0?(p(),E("tr",_t,[...u[4]||(u[4]=[l("td",{class:"text-center",colspan:"2"},"沒有事項",-1)])])):(p(!0),E(R,{key:1},be(ve(n).finishedItems,o=>(p(),E("tr",{key:o.id},[l("td",null,Ce(o.text),1),l("td",null,[i(z,{icon:"mdi-delete",onClick:y=>N(o.id)},null,8,["onClick"])])]))),128))])]),_:1})]),_:1})]),_:1})]),_:1}))}};export{Bt as default};
